{
  "profile_name": "anexos_EAF",
  "version": "1.0",
  "validation_framework": {
    
    "extraction_quality_thresholds": {
      "critical_chapters": {
        "technical_specifications": {
          "min_text_extraction": 0.95,
          "min_entities_extracted": 15,
          "required_entity_types": ["power_ratings", "equipment_models", "voltage_levels"],
          "manual_review_threshold": 0.90
        },
        "company_reports": {
          "min_text_extraction": 0.98,
          "min_entities_extracted": 10,
          "required_entity_types": ["company_names", "rut_numbers", "compliance_status"],
          "manual_review_threshold": 0.95
        }
      },
      
      "standard_chapters": {
        "executive_summary": {
          "min_text_extraction": 0.90,
          "min_entities_extracted": 8,
          "manual_review_threshold": 0.85
        },
        "chronology": {
          "min_text_extraction": 0.85,
          "min_timestamps": 5,
          "chronological_order_required": true,
          "manual_review_threshold": 0.80
        },
        "equipment_analysis": {
          "min_text_extraction": 0.90,
          "min_equipment_mentions": 5,
          "manual_review_threshold": 0.85
        }
      },
      
      "optional_chapters": {
        "conclusions": {
          "min_text_extraction": 0.85,
          "min_recommendations": 3,
          "manual_review_threshold": 0.75
        },
        "appendices": {
          "min_text_extraction": 0.70,
          "preserve_structure": true,
          "manual_review_threshold": 0.65
        }
      }
    },

    "entity_validation_rules": {
      "company_names": {
        "canonical_forms": {
          "ENEL GENERACIÓN CHILE S.A.": ["Enel Generación", "ENEL CHILE", "Enel Chile S.A."],
          "COLBÚN S.A.": ["Colbun", "COLBUN S.A.", "Colbún"],
          "AES ANDES S.A.": ["AES Andes", "AES CHILE"],
          "INTERCHILE S.A.": ["Interchile", "INTER CHILE"]
        },
        "validation_checks": {
          "must_have_legal_form": true,
          "acceptable_forms": ["S.A.", "LTDA.", "SPA", "S.A", "LTDA", "Ltda."],
          "min_length": 4,
          "max_length": 100,
          "exclude_patterns": ["EMPRESA", "COMPAÑÍA", "SOCIEDAD"]
        },
        "confidence_scoring": {
          "exact_match": 1.0,
          "canonical_match": 0.95,
          "fuzzy_match_threshold": 0.85,
          "partial_match_threshold": 0.70
        }
      },

      "technical_specifications": {
        "power_ratings": {
          "units": ["MW", "MVA", "kW", "GW"],
          "reasonable_ranges": {
            "MW": [0.1, 10000],
            "MVA": [0.1, 15000], 
            "kW": [1, 1000000],
            "GW": [0.001, 50]
          },
          "decimal_precision": 3,
          "validation_flags": {
            "unreasonable_high": "> 20000 MW",
            "unreasonable_low": "< 0.01 MW", 
            "missing_unit": "number without unit",
            "incorrect_unit": "non-standard unit"
          }
        },
        
        "voltage_levels": {
          "standard_levels_kv": [500, 220, 154, 110, 66, 44, 33, 23, 13.8, 13.2, 12.47, 4.16, 0.48, 0.22],
          "tolerance_percentage": 5,
          "validation_flags": {
            "non_standard": "voltage not in standard list",
            "unreasonable": "< 0.1 kV or > 1000 kV"
          }
        },

        "equipment_models": {
          "known_manufacturers": ["Siemens", "ABB", "GE", "Schneider", "Areva", "Mitsubishi", "Toshiba"],
          "model_pattern": "[A-Z0-9\\-]{3,15}",
          "validation_checks": {
            "manufacturer_required": true,
            "model_format_valid": true,
            "reasonable_length": [3, 20]
          }
        }
      },

      "dates_and_times": {
        "formats": [
          "DD/MM/YYYY",
          "DD-MM-YYYY", 
          "DD de MONTH de YYYY",
          "HH:MM:SS",
          "HH:MM"
        ],
        "validation_rules": {
          "year_range": [2020, 2030],
          "logical_sequence": "events should be chronological",
          "business_hours": "events typically during business hours flagged if not"
        }
      },

      "rut_numbers": {
        "format": "XX.XXX.XXX-X",
        "validation_algorithm": "chilean_rut_checksum",
        "flags": {
          "invalid_checksum": "RUT checksum validation failed",
          "invalid_format": "RUT format doesn't match XX.XXX.XXX-X"
        }
      }
    },

    "cross_chapter_validation": {
      "company_consistency": {
        "rule": "Company names must be consistent across all chapters",
        "tolerance": "Allow minor spelling variations",
        "flags": {
          "inconsistent_naming": "Same company with different names",
          "missing_in_chapter": "Company mentioned in one chapter but not others"
        }
      },
      
      "technical_consistency": {
        "rule": "Technical specifications should align across chapters",
        "checks": [
          "Power ratings mentioned in summary vs detailed specs",
          "Equipment names consistency",
          "Voltage levels alignment"
        ],
        "tolerance": "5% variance acceptable for power ratings"
      },
      
      "timeline_consistency": {
        "rule": "Timeline in chronology should align with other chapter references",
        "checks": [
          "Event dates consistency",
          "Duration calculations",
          "Sequence logic"
        ]
      }
    },

    "document_completeness_validation": {
      "mandatory_chapters": [
        "title_page",
        "executive_summary", 
        "technical_specifications",
        "company_reports"
      ],
      
      "expected_chapters": [
        "chronology",
        "equipment_analysis",
        "compliance_status",
        "conclusions"
      ],
      
      "completeness_scoring": {
        "all_mandatory": 1.0,
        "missing_one_mandatory": 0.7,
        "missing_multiple_mandatory": 0.4,
        "only_title_page": 0.1
      }
    },

    "quality_flags": {
      "high_priority": {
        "extraction_failure": "Chapter extraction completely failed",
        "critical_entities_missing": "Key entities not found in critical chapters",
        "format_detection_failed": "Unable to detect chapter format",
        "inconsistent_cross_references": "Major inconsistencies between chapters"
      },
      
      "medium_priority": {
        "low_confidence_extraction": "Extraction confidence below threshold",
        "partial_entity_extraction": "Some entities missing but chapter functional",
        "format_variation": "Unexpected format variation detected",
        "minor_inconsistencies": "Minor cross-chapter inconsistencies"
      },
      
      "low_priority": {
        "text_quality_issues": "OCR quality issues but readable",
        "formatting_anomalies": "Unusual formatting but parseable",
        "optional_content_missing": "Non-critical content not extracted"
      }
    },

    "automated_fixes": {
      "company_name_standardization": {
        "enabled": true,
        "apply_canonical_forms": true,
        "confidence_threshold": 0.85
      },
      
      "technical_unit_standardization": {
        "enabled": true,
        "normalize_units": ["MW", "MVA", "kV"],
        "decimal_standardization": true
      },
      
      "date_format_standardization": {
        "enabled": true,
        "target_format": "YYYY-MM-DD",
        "preserve_original": true
      }
    },

    "manual_review_triggers": {
      "always_review": [
        "extraction_quality < 0.80",
        "critical_entities_missing",
        "major_format_variations"
      ],
      
      "conditional_review": [
        "new_company_detected",
        "unusual_technical_values", 
        "timeline_inconsistencies"
      ],
      
      "optional_review": [
        "minor_formatting_issues",
        "optional_content_variations"
      ]
    },

    "output_validation": {
      "json_schema_validation": true,
      "required_fields_check": true,
      "data_type_validation": true,
      "relationship_consistency": true,
      
      "export_quality_report": {
        "include_confidence_scores": true,
        "include_validation_flags": true,
        "include_manual_review_recommendations": true,
        "include_processing_statistics": true
      }
    }
  },

  "processing_guidelines": {
    "failure_handling": {
      "chapter_extraction_failure": "Continue processing other chapters, flag for manual review",
      "entity_extraction_failure": "Use fallback patterns, reduce confidence score",
      "format_detection_failure": "Try alternative extraction strategies",
      "validation_failure": "Flag but don't halt processing"
    },
    
    "confidence_thresholds": {
      "auto_accept": 0.95,
      "manual_review": 0.80,
      "reprocess_recommend": 0.60,
      "extraction_failure": 0.40
    }
  }
}